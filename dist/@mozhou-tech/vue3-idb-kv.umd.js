(function(i,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(i=typeof globalThis<"u"?globalThis:i||self,r(i["@mozhou-tech/vue3-idb-kv"]={}))})(this,function(i){"use strict";function r(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function l(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const u=r(t);return(v,M)=>u.then(S=>M(S.transaction(e,v).objectStore(e)))}let a;function o(){return a||(a=l("keyval-store","keyval")),a}function d(n,e=o()){return e("readonly",t=>r(t.get(n)))}function f(n,e,t=o()){return t("readwrite",u=>(u.put(e,n),r(u.transaction)))}function s(n,e=o()){return e("readwrite",t=>(n.forEach(u=>t.put(u[1],u[0])),r(t.transaction)))}function y(n,e=o()){return e("readonly",t=>Promise.all(n.map(u=>r(t.get(u)))))}function h(n,e=o()){return e("readwrite",t=>(t.delete(n),r(t.transaction)))}function g(n,e=o()){return e("readwrite",t=>(n.forEach(u=>t.delete(u)),r(t.transaction)))}function p(n=o()){return n("readwrite",e=>(e.clear(),r(e.transaction)))}function c(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},r(n.transaction)}function m(n=o()){return n("readonly",e=>{if(e.getAllKeys)return r(e.getAllKeys());const t=[];return c(e,u=>t.push(u.key)).then(()=>t)})}function b(n=o()){return n("readonly",e=>{if(e.getAll)return r(e.getAll());const t=[];return c(e,u=>t.push(u.value)).then(()=>t)})}i.clear=p,i.del=h,i.delMany=g,i.get=d,i.getMany=y,i.keys=m,i.set=f,i.setMany=s,i.values=b,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
